hcmkind: TopologyInstance
hcmapiversion: hcm.io/v1alpha1
metadata:
  name: sprsrv1instance_mydev
---
kind: Application
apiversion: hcm.io/v1alpha1
scope:
metadata:
  name: "{{application-name}}"
  description: "Sample Application for deploy"
  labels:
  properties:
    type: instance
relationships:
  - name: player1
    metadata:
      targetname: player1
      targetkind: ApplicationService
      type: contains
      properties:
  - name: player2
    metadata:
      targetname: player2
      targetkind: ApplicationService
      type: contains
      properties:
---
kind: ApplicationService
apiversion: hcm.io/v1alpha1
scope:
  clusters: ["crucial-owl"]
metadata:
  name: "player1"
  description: Service1 Template
  labels:
  properties:
    type: instance
    runtime: kubernetes
    moveable: true
    discoverable: false
    connections:
      - name: http
        port: 32111
        address: 9.21.51.52
        protocol: http
relationships:
---
kind: ApplicationService
apiversion: hcm.io/v1alpha1
scope:
  clusters: ["myminikube"]
metadata:
  name: "player2"
  description: Service2 instance
  labels:
  properties:
    type: instance
    runtime: kubernetes
    moveable: true
    discoverable: false
    registries:
      - name: consul
        service: consul
    connections:
      - name: http
        port: 31112
        protocol: http
relationships:
---
kind: ServiceRegistry
apiversion: hcm.io/v1alpha1
scope:
  clusters: ["myminikube"]
metadata:
  name: "consul"
  description: Instance descriptor for consulinstance
  labels:
  properties:
    type: instance
    runtime: kubernetes
    connections:
      - name: http
        port: 8500
        address: 9.21.51.52
        protocol: http
---
